{"ast":null,"code":"var _jsxFileName = \"C:\\\\Mini\\\\Exam-Seat-Arrangement-System\\\\src\\\\components\\\\SeatAllocation.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect, useMemo } from 'react';\nimport SeatBox from './SeatBox';\nimport useAxiosPrivate from '../hooks/useAxiosPrivate';\nimport { ThreeCircles } from 'react-loader-spinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst url = '/seat-allocation';\nexport default function SeatAllocation() {\n  _s();\n  const axiosPrivate = useAxiosPrivate();\n  const [loading, setLoading] = useState(true);\n  const [exams, setExams] = useState([]);\n  const [details, setDetails] = useState([]);\n  const [dates, setDates] = useState([]);\n  const [rooms, setRooms] = useState([]);\n  const [selectedRooms, setSelectedRooms] = useState([]);\n  const [bookedRooms, setBookedRooms] = useState([]);\n  const [studentsCount, setStudentsCount] = useState(0);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [sortTerm, setSortTerm] = useState(\"\");\n  const dateRef = useRef();\n  const timeRef = useRef();\n  const examRef = useRef();\n  const [seatSelected, setSeatSelected] = useState(0);\n  let totalCapacity = rooms.reduce((total, obj) => total + obj.capacity, 0);\n  const filteredRooms = useMemo(() => {\n    let list = rooms;\n    if (list.length > 0 && searchTerm) {\n      list = list.filter(item => item.room_no.slice(0, searchTerm.length) === searchTerm.toUpperCase());\n    }\n    if (list.length > 0 && sortTerm) {\n      if (sortTerm === \"min\") list = list.sort((a, b) => {\n        return a.capacity - b.capacity;\n      });\n      if (sortTerm === \"max\") list = list.sort((a, b) => {\n        return b.capacity - a.capacity;\n      });\n      if (sortTerm === \"asc\") list = list.sort((a, b) => {\n        return a.room_no.slice(-3) - b.room_no.slice(-3);\n      });\n      if (sortTerm === \"desc\") list = list.sort((a, b) => {\n        return b.room_no.slice(-3) - a.room_no.slice(-3);\n      });\n    }\n    return list;\n  }, [searchTerm, sortTerm, rooms]);\n  const handleExcels = async () => {\n    setLoading(true);\n    try {\n      await axiosPrivate.get(url.concat('/send-excels'), {\n        withCredentials: true\n      });\n      setLoading(false);\n      alert(\"Email sent successfully\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleRooms = async () => {\n    setLoading(true);\n    const controller = new AbortController();\n    const date = dateRef.current.options[dateRef.current.selectedIndex].value;\n    const time = timeRef.current.options[timeRef.current.selectedIndex].value;\n    const payload = {\n      date,\n      time,\n      rooms: rooms.reduce((acc, _ref) => {\n        let {\n          room_no,\n          capacity\n        } = _ref;\n        if (selectedRooms.includes(room_no)) {\n          acc.push({\n            room_no,\n            capacity\n          });\n        }\n        return acc;\n      }, []),\n      details\n    };\n    try {\n      await axiosPrivate.post(url.concat(\"/allocation\"), payload, {\n        signal: controller.signal\n      });\n      alert(\"Arrangement successful for exams on \" + date + \" \" + time);\n      window.location.reload();\n    } catch (error) {\n      console.log(error);\n    }\n    return () => {\n      controller.abort();\n    };\n  };\n  const handleExams = () => {\n    setLoading(true);\n    let isMounted = true;\n    const controller = new AbortController();\n    const date = dateRef.current.options[dateRef.current.selectedIndex].value;\n    const time = timeRef.current.options[timeRef.current.selectedIndex].value;\n    const examInfo = {\n      date,\n      time\n    };\n    const getExams = async () => {\n      try {\n        const response = await axiosPrivate.get(url.concat('/get-exams'), {\n          params: examInfo,\n          signal: controller.signal\n        });\n        const {\n          exams,\n          details,\n          totalStudents\n        } = response.data;\n        if (isMounted) {\n          setExams(exams);\n          setDetails(details);\n          setStudentsCount(totalStudents);\n        }\n        const bookedRoomsResponse = await axiosPrivate.get(url.concat('/get-allocation'), {\n          params: {\n            date,\n            time\n          },\n          signal: controller.signal\n        });\n        if (isMounted) {\n          setBookedRooms(bookedRoomsResponse.data.rooms);\n          setSelectedRooms([]);\n          setSeatSelected(bookedRoomsResponse.data.seats);\n          setLoading(false);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getExams();\n    return () => {\n      isMounted = false;\n      controller.abort();\n    };\n  };\n  useEffect(() => {\n    let isMounted = true;\n    const controller = new AbortController();\n    const getRooms = async () => {\n      try {\n        const response = await axiosPrivate.get(url.concat('/get-rooms'), {\n          signal: controller.signal\n        });\n        isMounted && setRooms(response.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getRooms();\n    const getDates = async () => {\n      try {\n        const dateResponse = await axiosPrivate.get(url.concat(\"/dates\"), {\n          signal: controller.signal\n        });\n        isMounted && setDates(dateResponse.data);\n        const init_date = dateResponse.data[0];\n        const examsResponse = await axiosPrivate.get(url.concat('/get-exams'), {\n          params: {\n            date: init_date,\n            time: \"FN\"\n          },\n          signal: controller.signal\n        });\n        const {\n          exams,\n          details,\n          totalStudents\n        } = examsResponse.data;\n        if (isMounted) {\n          setExams(exams);\n          setDetails(details);\n          setStudentsCount(totalStudents);\n        }\n        const bookedRoomsResponse = await axiosPrivate.get(url.concat('/get-allocation'), {\n          params: {\n            date: init_date,\n            time: \"FN\"\n          },\n          signal: controller.signal\n        });\n        if (isMounted) {\n          setBookedRooms(bookedRoomsResponse.data.rooms);\n          setSelectedRooms([]);\n          setSeatSelected(bookedRoomsResponse.data.seats);\n          setLoading(false);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    isMounted && getDates();\n    return () => {\n      isMounted = false;\n      controller.abort();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-background flex flex-col flex-grow md:w-5/6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-background px-8 pt-4 flex flex-col st:flex-row justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row mt-6 items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-Outfit-Bold\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"whitespace-nowrap\",\n            children: \"SELECT DATE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 52\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          ref: dateRef,\n          onChange: handleExams,\n          className: \"h-10 px-3 py-2 ml-5 rounded-[20px] shadow-sm border-gray-300 min-w-[200px] focus:outline-none focus:ring-2 focus:ring-green-login\",\n          children: dates.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: item,\n            children: item\n          }, item, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 32\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row mt-6 items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-Outfit-Bold\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"whitespace-nowrap\",\n            children: \"SELECT TIME\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 52\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          ref: timeRef,\n          defaultValue: \"FN\",\n          onChange: handleExams,\n          className: \"h-10 px-3 py-2 ml-6 rounded-[20px] shadow-sm border-gray-300 min-w-[200px] focus:outline-none focus:ring-2 focus:ring-green-login\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"FN\",\n            children: \"FN\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"AN\",\n            children: \"AN\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row mt-6 items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-Outfit-Bold\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"whitespace-nowrap\",\n            children: \"EXAMS SCHEDULED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 52\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          ref: examRef,\n          className: \"h-10 px-3 py-2 ml-4 rounded-[20px] shadow-sm border-gray-300 min-w-[200px] focus:outline-none focus:ring-2 focus:ring-green-login\",\n          children: exams.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: item,\n            children: item\n          }, item, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 32\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col m-8 mt-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-Outfit-Bold mb-4\",\n        children: \"SELECT EXAM HALLS\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row hw:flex-col st:mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-grow flex flex-col relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-row justify-between items-center bg-gray-100 px-4 py-3 rounded-t-2xl font-Outfit-Regular\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mr-4 flex flex-row items-center w-full\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-500\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  viewBox: \"0 0 20 20\",\n                  fill: \"currentColor\",\n                  className: \"w-6 h-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    fillRule: \"evenodd\",\n                    d: \"M8.5 15a6.5 6.5 0 100-13 6.5 6.5 0 000 13zm5.057-1.54l4.442 4.442a1 1 0 11-1.414 1.414l-4.442-4.442a7 7 0 111.414-1.414z\",\n                    clipRule: \"evenodd\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"search\",\n                onChange: e => setSearchTerm(e.target.value),\n                className: \"p-2 ml-2 flex-1 rounded-md focus:outline-none focus:ring-2 focus:ring-green-login text-gray-600\",\n                placeholder: \"Search\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-grow flex flex-row items-center \",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"ml-2 whitespace-nowrap\",\n                children: \"Sort By :\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"min-w-[156px] p-[10.4px] m-1 rounded-md focus:outline-none focus:ring-2 focus:ring-green-login text-gray-600\",\n                defaultValue: \"min\",\n                onChange: e => setSortTerm(e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"min\",\n                  children: \"Increasing capacity\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"max\",\n                  children: \"Decreasing capacity\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"asc\",\n                  children: \"Increasing Floor(0 - 5)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"desc\",\n                  children: \"Decreasing Floor(5 - 0)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `bg-gray-100 h-[21.5rem] overflow-y-auto rounded-b-2xl p-4 w-full ${studentsCount === 0 && \"pointer-events-none\"}`,\n            children: loading ? /*#__PURE__*/_jsxDEV(ThreeCircles, {\n              height: \"65\",\n              width: \"65\",\n              color: \"#23ca85\",\n              wrapperStyle: {\n                \"position\": \"absolute\",\n                \"left\": \"45%\",\n                \"top\": \"40%\"\n              },\n              visible: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 27\n            }, this) : filteredRooms.map(item => /*#__PURE__*/_jsxDEV(SeatBox, {\n              room: item.room_no,\n              capacity: item.capacity,\n              setSelectedRooms: setSelectedRooms,\n              setSeatSelected: setSeatSelected,\n              bookedRooms: bookedRooms\n            }, item.room_no, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 48\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border border-black border-opacity-50 h-full min-w-[300px] self-center rounded-lg flex flex-col ml-5 hw:w-full hw:mx-4 hw:mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"p-6 font-Outfit-Bold text-xl\",\n            children: \" STATISTICS \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"border-t border-black border-opacity-50 ml-5 mr-7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"pl-3 hw:pb-5 mt-4 font-Outfit-Regular\",\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"p-3\",\n              children: [\"Total Rooms : \", rooms.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"p-3\",\n              children: [\"Available Seats : \", bookedRooms.length > 0 ? 0 : totalCapacity - seatSelected]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: `p-3 ${seatSelected < studentsCount && seatSelected !== 0 ? \"text-red-500\" : \"\"} ${seatSelected < studentsCount ? \"\" : \"text-green-save\"} `,\n              children: [\"Rooms Selected : \", bookedRooms.length > 0 ? bookedRooms.length : selectedRooms.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: `p-3 ${seatSelected < studentsCount && seatSelected !== 0 ? \"text-red-500\" : \"\"} ${seatSelected < studentsCount ? \"\" : \"text-green-save\"} `,\n              children: [\"Seats Selected : \", seatSelected, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"p-3\",\n              children: [\"Total Participants : \", studentsCount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-8 py-4 my-2\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-row gap-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg-green-500 hover:bg-green-400 text-white font-Outfit-Bold h-10 w-[10rem] rounded-[20px]\",\n            type: \"button\",\n            onClick: handleRooms,\n            children: \"ARRANGE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg-green-medium hover:bg-green-light text-white font-Outfit-Bold h-10 w-[10rem] rounded-[20px]\",\n            type: \"button\",\n            onClick: handleExcels,\n            children: \"RECEIVE MAIL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 5\n  }, this);\n}\n_s(SeatAllocation, \"8BKltf50ffLGGShQWmuPKGgBxUE=\", false, function () {\n  return [useAxiosPrivate];\n});\n_c = SeatAllocation;\nvar _c;\n$RefreshReg$(_c, \"SeatAllocation\");","map":{"version":3,"names":["useState","useRef","useEffect","useMemo","SeatBox","useAxiosPrivate","ThreeCircles","jsxDEV","_jsxDEV","url","SeatAllocation","_s","axiosPrivate","loading","setLoading","exams","setExams","details","setDetails","dates","setDates","rooms","setRooms","selectedRooms","setSelectedRooms","bookedRooms","setBookedRooms","studentsCount","setStudentsCount","searchTerm","setSearchTerm","sortTerm","setSortTerm","dateRef","timeRef","examRef","seatSelected","setSeatSelected","totalCapacity","reduce","total","obj","capacity","filteredRooms","list","length","filter","item","room_no","slice","toUpperCase","sort","a","b","handleExcels","get","concat","withCredentials","alert","error","console","log","handleRooms","controller","AbortController","date","current","options","selectedIndex","value","time","payload","acc","_ref","includes","push","post","signal","window","location","reload","abort","handleExams","isMounted","examInfo","getExams","response","params","totalStudents","data","bookedRoomsResponse","seats","getRooms","getDates","dateResponse","init_date","examsResponse","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","onChange","map","defaultValue","viewBox","fill","fillRule","d","clipRule","type","id","e","target","placeholder","height","width","color","wrapperStyle","visible","room","onClick","_c","$RefreshReg$"],"sources":["C:/Mini/Exam-Seat-Arrangement-System/src/components/SeatAllocation.jsx"],"sourcesContent":["import { useState, useRef, useEffect, useMemo } from 'react';\r\nimport SeatBox from './SeatBox';\r\nimport useAxiosPrivate from '../hooks/useAxiosPrivate';\r\nimport { ThreeCircles } from 'react-loader-spinner'\r\n\r\n\r\nconst url = '/seat-allocation';\r\n\r\nexport default function SeatAllocation() {\r\n  const axiosPrivate = useAxiosPrivate();\r\n  const [loading, setLoading] = useState(true);\r\n  const [exams, setExams] = useState([]);\r\n  const [details, setDetails] = useState([]);\r\n  const [dates, setDates] = useState([]);\r\n  const [rooms, setRooms] = useState([]);\r\n  const [selectedRooms, setSelectedRooms] = useState([]);\r\n  const [bookedRooms, setBookedRooms] = useState([]);\r\n  const [studentsCount, setStudentsCount] = useState(0);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [sortTerm, setSortTerm] = useState(\"\");\r\n  const dateRef = useRef();\r\n  const timeRef = useRef();\r\n  const examRef = useRef();\r\n  const [seatSelected, setSeatSelected] = useState(0);\r\n  let totalCapacity = rooms.reduce((total, obj) => total + obj.capacity, 0);\r\n\r\n  const filteredRooms = useMemo(() => {\r\n    let list = rooms;\r\n    if (list.length > 0 && searchTerm) {\r\n      list = list.filter((item) => item.room_no.slice(0, searchTerm.length) === searchTerm.toUpperCase());\r\n    }\r\n    if (list.length > 0 && sortTerm) {\r\n      if (sortTerm === \"min\") list = list.sort((a, b) => { return a.capacity - b.capacity });\r\n      if (sortTerm === \"max\") list = list.sort((a, b) => { return b.capacity - a.capacity });\r\n      if (sortTerm === \"asc\") list = list.sort((a, b) => { return a.room_no.slice(-3) - b.room_no.slice(-3) });\r\n      if (sortTerm === \"desc\") list = list.sort((a, b) => { return b.room_no.slice(-3) - a.room_no.slice(-3) });\r\n    }\r\n    return list;\r\n  }, [searchTerm, sortTerm, rooms]);\r\n\r\n  const handleExcels = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await axiosPrivate.get(url.concat('/send-excels'), {\r\n        withCredentials: true\r\n      });\r\n      setLoading(false);\r\n      alert(\"Email sent successfully\");\r\n    }\r\n    catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  const handleRooms = async () => {\r\n    setLoading(true);\r\n    const controller = new AbortController();\r\n\r\n    const date = dateRef.current.options[dateRef.current.selectedIndex].value;\r\n    const time = timeRef.current.options[timeRef.current.selectedIndex].value;\r\n    const payload = {\r\n      date,\r\n      time,\r\n      rooms: rooms.reduce((acc, { room_no, capacity }) => {\r\n        if (selectedRooms.includes(room_no)) {\r\n          acc.push({ room_no, capacity });\r\n        }\r\n        return acc;\r\n      }, []),\r\n      details\r\n    };\r\n\r\n    try {\r\n      await axiosPrivate.post(url.concat(\"/allocation\"), payload, {\r\n        signal: controller.signal\r\n      });\r\n      alert(\"Arrangement successful for exams on \" + date + \" \" + time);\r\n      window.location.reload();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    return () => {\r\n      controller.abort();\r\n    }\r\n  }\r\n\r\n  const handleExams = () => {\r\n    setLoading(true);\r\n    let isMounted = true;\r\n    const controller = new AbortController();\r\n\r\n    const date = dateRef.current.options[dateRef.current.selectedIndex].value;\r\n    const time = timeRef.current.options[timeRef.current.selectedIndex].value;\r\n\r\n    const examInfo = { date, time };\r\n\r\n    const getExams = async () => {\r\n      try {\r\n        const response = await axiosPrivate.get(url.concat('/get-exams'), {\r\n          params: examInfo,\r\n          signal: controller.signal\r\n        });\r\n        const { exams, details, totalStudents } = response.data;\r\n        if (isMounted) {\r\n          setExams(exams);\r\n          setDetails(details);\r\n          setStudentsCount(totalStudents);\r\n        }\r\n\r\n        const bookedRoomsResponse = await axiosPrivate.get(url.concat('/get-allocation'), {\r\n          params: { date, time },\r\n          signal: controller.signal\r\n        });\r\n\r\n        if (isMounted) {\r\n          setBookedRooms(bookedRoomsResponse.data.rooms);\r\n          setSelectedRooms([]);\r\n          setSeatSelected(bookedRoomsResponse.data.seats);\r\n          setLoading(false);\r\n        }\r\n      }\r\n      catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n\r\n    getExams();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n      controller.abort();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const controller = new AbortController();\r\n\r\n    const getRooms = async () => {\r\n      try {\r\n        const response = await axiosPrivate.get(url.concat('/get-rooms'), {\r\n          signal: controller.signal\r\n        });\r\n        isMounted && setRooms(response.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n\r\n    getRooms();\r\n\r\n    const getDates = async () => {\r\n      try {\r\n        const dateResponse = await axiosPrivate.get(url.concat(\"/dates\"), {\r\n          signal: controller.signal\r\n        });\r\n        isMounted && setDates(dateResponse.data);\r\n        const init_date = dateResponse.data[0];\r\n\r\n        const examsResponse = await axiosPrivate.get(url.concat('/get-exams'), {\r\n          params: { date: init_date, time: \"FN\" },\r\n          signal: controller.signal\r\n        });\r\n        const { exams, details, totalStudents } = examsResponse.data;\r\n        if (isMounted) {\r\n          setExams(exams);\r\n          setDetails(details);\r\n          setStudentsCount(totalStudents);\r\n        }\r\n\r\n        const bookedRoomsResponse = await axiosPrivate.get(url.concat('/get-allocation'), {\r\n          params: { date: init_date, time: \"FN\" },\r\n          signal: controller.signal\r\n        });\r\n\r\n        if (isMounted) {\r\n          setBookedRooms(bookedRoomsResponse.data.rooms);\r\n          setSelectedRooms([]);\r\n          setSeatSelected(bookedRoomsResponse.data.seats);\r\n          setLoading(false);\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n\r\n    isMounted && getDates();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n      controller.abort();\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"bg-background flex flex-col flex-grow md:w-5/6\">\r\n      <div className=\"bg-background px-8 pt-4 flex flex-col st:flex-row justify-between\">\r\n        <div className=\"flex flex-row mt-6 items-center\">\r\n          <h2 className=\"text-xl font-Outfit-Bold\"><span className=\"whitespace-nowrap\">SELECT DATE</span></h2>\r\n          <select ref={dateRef} onChange={handleExams} className=\"h-10 px-3 py-2 ml-5 rounded-[20px] shadow-sm border-gray-300 min-w-[200px] focus:outline-none focus:ring-2 focus:ring-green-login\">\r\n            {dates.map(item => <option key={item} value={item}>{item}</option>)}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"flex flex-row mt-6 items-center\">\r\n          <h2 className=\"text-xl font-Outfit-Bold\"><span className=\"whitespace-nowrap\">SELECT TIME</span></h2>\r\n          <select ref={timeRef} defaultValue={\"FN\"} onChange={handleExams} className=\"h-10 px-3 py-2 ml-6 rounded-[20px] shadow-sm border-gray-300 min-w-[200px] focus:outline-none focus:ring-2 focus:ring-green-login\">\r\n            <option value=\"FN\">FN</option>\r\n            <option value=\"AN\">AN</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"flex flex-row mt-6 items-center\">\r\n          <h2 className=\"text-xl font-Outfit-Bold\"><span className=\"whitespace-nowrap\">EXAMS SCHEDULED</span></h2>\r\n          <select ref={examRef} className=\"h-10 px-3 py-2 ml-4 rounded-[20px] shadow-sm border-gray-300 min-w-[200px] focus:outline-none focus:ring-2 focus:ring-green-login\">\r\n            {exams.map(item => <option key={item} value={item}>{item}</option>)}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-col m-8 mt-10\">\r\n        <h2 className=\"text-xl font-Outfit-Bold mb-4\">SELECT EXAM HALLS</h2>\r\n        <div className=\"flex flex-row hw:flex-col st:mb-3\">\r\n          <div className=\"flex-grow flex flex-col relative\">\r\n            <div className=\"flex flex-row justify-between items-center bg-gray-100 px-4 py-3 rounded-t-2xl font-Outfit-Regular\">\r\n              {/* Search Bar */}\r\n              <div className=\"mr-4 flex flex-row items-center w-full\">\r\n                <span className=\"text-gray-500\">\r\n                  <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" className=\"w-6 h-6\">\r\n                    <path\r\n                      fillRule=\"evenodd\"\r\n                      d=\"M8.5 15a6.5 6.5 0 100-13 6.5 6.5 0 000 13zm5.057-1.54l4.442 4.442a1 1 0 11-1.414 1.414l-4.442-4.442a7 7 0 111.414-1.414z\"\r\n                      clipRule=\"evenodd\"\r\n                    />\r\n                  </svg>\r\n                </span>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"search\"\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"p-2 ml-2 flex-1 rounded-md focus:outline-none focus:ring-2 focus:ring-green-login text-gray-600\"\r\n                  placeholder=\"Search\"\r\n                />\r\n              </div>\r\n              {/* Sort By Dropdown */}\r\n              <div className=\"flex-grow flex flex-row items-center \">\r\n                <p className=\"ml-2 whitespace-nowrap\">Sort By :</p>\r\n                <select className=\"min-w-[156px] p-[10.4px] m-1 rounded-md focus:outline-none focus:ring-2 focus:ring-green-login text-gray-600\"\r\n                  defaultValue=\"min\" onChange={(e) => setSortTerm(e.target.value)}>\r\n                  <option value=\"min\">Increasing capacity</option>\r\n                  <option value=\"max\">Decreasing capacity</option>\r\n                  <option value=\"asc\">Increasing Floor(0 - 5)</option>\r\n                  <option value=\"desc\">Decreasing Floor(5 - 0)</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className={`bg-gray-100 h-[21.5rem] overflow-y-auto rounded-b-2xl p-4 w-full ${studentsCount === 0 && \"pointer-events-none\"}`}>\r\n              {loading ? (<ThreeCircles\r\n                height=\"65\"\r\n                width=\"65\"\r\n                color=\"#23ca85\"\r\n                wrapperStyle={{\r\n                  \"position\": \"absolute\",\r\n                  \"left\": \"45%\",\r\n                  \"top\": \"40%\"\r\n                }}\r\n                visible={true}\r\n              />) : (filteredRooms.map(item => <SeatBox key={item.room_no} room={item.room_no} capacity={item.capacity} setSelectedRooms={setSelectedRooms} setSeatSelected={setSeatSelected} bookedRooms={bookedRooms} />))\r\n              }\r\n            </div>\r\n          </div>\r\n          <div className=\"border border-black border-opacity-50 h-full min-w-[300px] self-center rounded-lg flex flex-col ml-5 hw:w-full hw:mx-4 hw:mt-2\">\r\n            {/* room for exam statistics */}\r\n            <h1 className=\"p-6 font-Outfit-Bold text-xl\"> STATISTICS </h1>\r\n            <hr className=\"border-t border-black border-opacity-50 ml-5 mr-7\"></hr>\r\n            <ul className=\"pl-3 hw:pb-5 mt-4 font-Outfit-Regular\">\r\n              <li className=\"p-3\">Total Rooms : {rooms.length}</li>\r\n              <li className=\"p-3\">Available Seats : {bookedRooms.length > 0 ? 0 : totalCapacity - seatSelected}</li>\r\n              <li className={`p-3 ${seatSelected < studentsCount && seatSelected !== 0 ? \"text-red-500\" : \"\"} ${seatSelected < studentsCount ? \"\" : \"text-green-save\"} `}>Rooms Selected : {bookedRooms.length > 0 ? bookedRooms.length : selectedRooms.length}</li>\r\n              <li className={`p-3 ${seatSelected < studentsCount && seatSelected !== 0 ? \"text-red-500\" : \"\"} ${seatSelected < studentsCount ? \"\" : \"text-green-save\"} `}>Seats Selected : {seatSelected} </li>\r\n              <li className=\"p-3\">Total Participants : {studentsCount}</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"px-8 py-4 my-2\">\r\n        <div className=\"flex flex-row justify-between items-center\">\r\n          <div>\r\n          </div>\r\n          <div className=\"flex flex-row gap-10\">\r\n            <button className=\"bg-green-500 hover:bg-green-400 text-white font-Outfit-Bold h-10 w-[10rem] rounded-[20px]\" type=\"button\" onClick={handleRooms}>ARRANGE</button>\r\n            <button className=\"bg-green-medium hover:bg-green-light text-white font-Outfit-Bold h-10 w-[10rem] rounded-[20px]\" type=\"button\" onClick={handleExcels}>RECEIVE MAIL</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div >\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}